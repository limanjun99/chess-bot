#include "pieces/bishop.h"

#include "../magic_bitboard.h"

using namespace chess;

// These values are hardcoded because it takes a non-neglible amount of time to generate them.
// See tools/magic_calculator.cpp.
MagicBitboard bishop_magic{
    {{{-1, -1}, {-1, 1}, {1, -1}, {1, 1}}},
    {58, 59, 59, 59, 59, 59, 59, 58, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 57, 57, 57, 57,
     59, 59, 59, 59, 57, 55, 55, 57, 59, 59, 59, 59, 57, 55, 55, 57, 59, 59, 59, 59, 57, 57,
     57, 57, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 58, 59, 59, 59, 59, 59, 59, 58},
    {18049651735527936U, 70506452091904U,    275415828992U,      1075975168U,        38021120U,
     8657588224U,        2216338399232U,     567382630219776U,   9024825867763712U,  18049651735527424U,
     70506452221952U,    275449643008U,      9733406720U,        2216342585344U,     567382630203392U,
     1134765260406784U,  4512412933816832U,  9024825867633664U,  18049651768822272U, 70515108615168U,
     2491752130560U,     567383701868544U,   1134765256220672U,  2269530512441344U,  2256206450263040U,
     4512412900526080U,  9024834391117824U,  18051867805491712U, 637888545440768U,   1135039602493440U,
     2269529440784384U,  4539058881568768U,  1128098963916800U,  2256197927833600U,  4514594912477184U,
     9592139778506752U,  19184279556981248U, 2339762086609920U,  4538784537380864U,  9077569074761728U,
     562958610993152U,   1125917221986304U,  2814792987328512U,  5629586008178688U,  11259172008099840U,
     22518341868716544U, 9007336962655232U,  18014673925310464U, 2216338399232U,     4432676798464U,
     11064376819712U,    22137335185408U,    44272556441600U,    87995357200384U,    35253226045952U,
     70506452091904U,    567382630219776U,   1134765260406784U,  2832480465846272U,  5667157807464448U,
     11333774449049600U, 22526811443298304U, 9024825867763712U,  18049651735527936U},
    {9196383984746768U,     9297753800810515U,     162696952847663200U,   2308117353311789064U, 4614017259063742468U,
     321402066468864U,      1297323670068277768U,  708088039016452U,      355837559470851584U,  2884590750199382336U,
     342346156644278304U,   164392658691719220U,   37296603724251649U,    641765180854248516U,  144139386191484928U,
     2594078063131103232U,  6919780982345224705U,  1166467625401585728U,  40537103935213600U,   147528080926310400U,
     73184877194903744U,    903044327549699072U,   5197435451414188052U,  2054002072315496449U, 154252823260303360U,
     22526796650643584U,    13835242784241500480U, 594492777392275536U,   4800839401837973504U, 12105823134758752768U,
     9224499595223126273U,  7320548556211330U,     434773320262487553U,   4615068530658902528U, 7066183206278004864U,
     565151124685186U,      147493489092199680U,   1252036166397001892U,  289365073630204176U,  576604797990405129U,
     284842500932016U,      37155916799283329U,    1230045734158795784U,  6052978920276451458U, 2261149961815042U,
     11534923779172491520U, 92324909119705476U,    14268566115776465408U, 1137174465003524U,    1155362438172380164U,
     18577900437569536U,    12252042881040384000U, 145241159554695176U,   8865080967168U,       45038272740786690U,
     2254033230242832U,     18577906818260992U,    18702571997248U,       9296625902832722192U, 290271222859776U,
     1442278368674325521U,  297802861889397264U,   292752255194763332U,   2352154507699323140U}};

Bitboard Bishop::attacks(Bitboard square, Bitboard occupancy) { return bishop_magic.attacks(square, occupancy); }