#include "pieces/rook.h"

#include "../magic_bitboard.h"

// These values are hardcoded because it takes a non-neglible amount of time to generate them.
// See tools/magic_calculator.cpp.
MagicBitboard rook_magic{
    {{{-1, 0}, {1, 0}, {0, -1}, {0, 1}}},
    {52, 53, 53, 53, 53, 53, 53, 52, 53, 54, 54, 54, 54, 54, 54, 53, 53, 54, 54, 54, 54, 54,
     54, 53, 53, 54, 54, 54, 54, 54, 54, 53, 53, 54, 54, 54, 54, 54, 54, 53, 53, 54, 54, 54,
     54, 54, 54, 53, 53, 54, 54, 54, 54, 54, 54, 53, 52, 53, 53, 53, 53, 53, 53, 52},
    {282578800148862U,     565157600297596U,     1130315200595066U,    2260630401190006U,    4521260802379886U,
     9042521604759646U,    18085043209519166U,   36170086419038334U,   282578800180736U,     565157600328704U,
     1130315200625152U,    2260630401218048U,    4521260802403840U,    9042521604775424U,    18085043209518592U,
     36170086419037696U,   282578808340736U,     565157608292864U,     1130315208328192U,    2260630408398848U,
     4521260808540160U,    9042521608822784U,    18085043209388032U,   36170086418907136U,   282580897300736U,
     565159647117824U,     1130317180306432U,    2260632246683648U,    4521262379438080U,    9042522644946944U,
     18085043175964672U,   36170086385483776U,   283115671060736U,     565681586307584U,     1130822006735872U,
     2261102847592448U,    4521664529305600U,    9042787892731904U,    18085034619584512U,   36170077829103616U,
     420017753620736U,     699298018886144U,     1260057572672512U,    2381576680245248U,    4624614895390720U,
     9110691325681664U,    18082844186263552U,   36167887395782656U,   35466950888980736U,   34905104758997504U,
     34344362452452352U,   33222877839362048U,   30979908613181440U,   26493970160820224U,   17522093256097792U,
     35607136465616896U,   9079539427579068672U, 8935706818303361536U, 8792156787827803136U, 8505056726876686336U,
     7930856604974452736U, 6782456361169985536U, 4485655873561051136U, 9115426935197958144U},
    {108086491992817698U,   9241395368935030848U, 36037730551989632U,   5008020379970043940U, 2377902819589029904U,
     108087499165532288U,   648519445928607772U,  36029514278715520U,   4974929513453486128U, 70369820020736U,
     11530481820911013888U, 8361073995591733248U, 149885665621049472U,  563018808525312U,     13835621009608679936U,
     5188709738409378562U,  1307312178603245568U, 1157425379114221770U, 36311371780071425U,   72093878139752448U,
     3459047088913946624U,  141287311312384U,     1763616785248322U,    603519733472165953U,  4629841362731712512U,
     9270941896333590689U,  1144887959355649U,    9728771361246044224U, 144119588270375040U,  6918091986189157392U,
     2306569837939394576U,  2594073703193089025U, 4629770787836920096U, 81099979820646400U,   13835199411270983684U,
     140806216222720U,      578712569305368704U,  4612952673010844161U, 9835862722263126544U, 282029061050436U,
     211108398923784U,      576495938017705984U,  184790521504464960U,  288529443868180488U,  2315414464629440516U,
     2306406543350431760U,  1246373430811689104U, 54628690906185737U,   5199687794533878016U, 5206304132597613056U,
     325528009868068352U,   1189126567100419328U, 1459307033936790144U, 145241096576892992U,  9511604646407308288U,
     1271177184037376U,     144255929860579393U,  18647717483929857U,   9033724977221889U,    92333705699266561U,
     375487688188920898U,   725361169607034881U,  8864837800196U,       2324420908523201538U}};

u64 Rook::attacks(u64 square, u64 occupancy) { return rook_magic.attacks(square, occupancy); }